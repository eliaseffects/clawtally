{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/eliasstevenson/Desktop/Projects/clawboard/app/pair/%5Bcode%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { useParams, useRouter } from \"next/navigation\";\nimport { useEffect, useState } from \"react\";\n\ninterface PairClaimResponse {\n  success: boolean;\n  anonymousToken?: string;\n  gatewayUrl?: string;\n  error?: string;\n}\n\ntype ClaimState = \"claiming\" | \"failed\" | \"success\";\n\nexport default function PairCodePage() {\n  const params = useParams<{ code: string }>();\n  const router = useRouter();\n  const code = (params?.code ?? \"\").toUpperCase();\n\n  const [state, setState] = useState<ClaimState>(\"claiming\");\n  const [message, setMessage] = useState(\"Claiming this OpenClaw pairing code...\");\n\n  useEffect(() => {\n    const claim = async () => {\n      if (!code) {\n        setState(\"failed\");\n        setMessage(\"Missing pairing code.\");\n        return;\n      }\n\n      try {\n        const response = await fetch(\"/api/pair/claim\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({ code }),\n        });\n\n        const body = (await response.json()) as PairClaimResponse;\n\n        if (!response.ok || !body.success || !body.anonymousToken) {\n          setState(\"failed\");\n          setMessage(body.error ?? \"Unable to claim pairing code.\");\n          return;\n        }\n\n        localStorage.setItem(\"clawboard.token\", body.anonymousToken);\n        if (body.gatewayUrl) {\n          localStorage.setItem(\"clawboard.gatewayUrl\", body.gatewayUrl);\n        }\n        localStorage.removeItem(\"clawboard.apiKey\");\n\n        setState(\"success\");\n        setMessage(\"Connected. Redirecting to your dashboard...\");\n\n        setTimeout(() => {\n          router.push(\"/dashboard\");\n        }, 500);\n      } catch {\n        setState(\"failed\");\n        setMessage(\"Network error while claiming pairing code.\");\n      }\n    };\n\n    claim();\n  }, [code, router]);\n\n  const stateTitle =\n    state === \"success\" ? \"Pairing Complete\" : state === \"failed\" ? \"Pairing Unavailable\" : \"Claiming Pair Code\";\n\n  return (\n    <main className=\"mx-auto flex min-h-screen w-full max-w-3xl items-center justify-center px-5 py-10 md:px-8\">\n      <section className=\"w-full max-w-xl rounded-3xl border border-[color:var(--border)] bg-[color:var(--bg-secondary)] p-6 text-center md:p-8\">\n        <p className=\"text-xs uppercase tracking-[0.2em] text-[color:var(--text-muted)]\">Pairing</p>\n        <h1 className=\"mt-3 text-2xl font-semibold\">{code || \"Pair Code\"}</h1>\n        <p className=\"mt-2 text-lg text-white\">{stateTitle}</p>\n        <p className=\"mt-4 text-sm text-[color:var(--text-muted)]\">{message}</p>\n\n        {state === \"failed\" ? (\n          <Link\n            href=\"/\"\n            className=\"mt-6 inline-flex rounded-xl bg-emerald-400 px-4 py-2 text-sm font-semibold text-black transition hover:bg-emerald-300 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-400\"\n          >\n            Back Home\n          </Link>\n        ) : null}\n      </section>\n    </main>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAee,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,OAAO,CAAC,QAAQ,QAAQ,EAAE,EAAE,WAAW;IAE7C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAa;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,MAAM,QAAQ;YACZ,IAAI,CAAC,MAAM;gBACT,SAAS;gBACT,WAAW;gBACX;YACF;YAEA,IAAI;gBACF,MAAM,WAAW,MAAM,MAAM,mBAAmB;oBAC9C,QAAQ;oBACR,SAAS;wBACP,gBAAgB;oBAClB;oBACA,MAAM,KAAK,SAAS,CAAC;wBAAE;oBAAK;gBAC9B;gBAEA,MAAM,OAAQ,MAAM,SAAS,IAAI;gBAEjC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,KAAK,OAAO,IAAI,CAAC,KAAK,cAAc,EAAE;oBACzD,SAAS;oBACT,WAAW,KAAK,KAAK,IAAI;oBACzB;gBACF;gBAEA,aAAa,OAAO,CAAC,mBAAmB,KAAK,cAAc;gBAC3D,IAAI,KAAK,UAAU,EAAE;oBACnB,aAAa,OAAO,CAAC,wBAAwB,KAAK,UAAU;gBAC9D;gBACA,aAAa,UAAU,CAAC;gBAExB,SAAS;gBACT,WAAW;gBAEX,WAAW;oBACT,OAAO,IAAI,CAAC;gBACd,GAAG;YACL,EAAE,OAAM;gBACN,SAAS;gBACT,WAAW;YACb;QACF;QAEA;IACF,GAAG;QAAC;QAAM;KAAO;IAEjB,MAAM,aACJ,UAAU,YAAY,qBAAqB,UAAU,WAAW,wBAAwB;IAE1F,qBACE,8OAAC;QAAK,WAAU;kBACd,cAAA,8OAAC;YAAQ,WAAU;;8BACjB,8OAAC;oBAAE,WAAU;8BAAoE;;;;;;8BACjF,8OAAC;oBAAG,WAAU;8BAA+B,QAAQ;;;;;;8BACrD,8OAAC;oBAAE,WAAU;8BAA2B;;;;;;8BACxC,8OAAC;oBAAE,WAAU;8BAA+C;;;;;;gBAE3D,UAAU,yBACT,8OAAC,uKAAI;oBACH,MAAK;oBACL,WAAU;8BACX;;;;;2BAGC;;;;;;;;;;;;AAIZ","debugId":null}}]
}