(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[410],{4140:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>m});var a=t(5155),s=t(2619),o=t.n(s),l=t(2115);let d=(e,r)=>"cost"===e?Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:2}).format(r):Intl.NumberFormat("en-US").format(r);function c(e){let{entries:r,category:t}=e;return 0===r.length?(0,a.jsx)("article",{className:"rounded-2xl border border-[color:var(--border)] bg-[color:var(--bg-secondary)] p-6 text-sm text-[color:var(--text-muted)]",children:"No shared profiles yet. Toggle sharing from your dashboard to seed the leaderboard."}):(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("article",{className:"divide-y divide-[color:var(--border)] overflow-hidden rounded-2xl border border-[color:var(--border)] bg-[color:var(--bg-secondary)] md:hidden",children:r.map(e=>{var r;return(0,a.jsxs)("div",{className:"px-4 py-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.16em] text-[color:var(--text-muted)]",children:"Rank"}),(0,a.jsxs)("p",{className:"font-[family-name:var(--font-mono)] text-sm",children:["#",e.rank]})]}),(0,a.jsxs)("div",{className:"mt-2 flex items-center justify-between gap-3",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.16em] text-[color:var(--text-muted)]",children:"User"}),(0,a.jsx)("p",{className:"text-sm",children:e.claimed&&null!=(r=e.identity)?r:e.anonymousId})]}),(0,a.jsxs)("div",{className:"mt-2 flex items-center justify-between gap-3",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.16em] text-[color:var(--text-muted)]",children:"Value"}),(0,a.jsx)("p",{className:"font-[family-name:var(--font-mono)] text-sm text-[color:var(--text-muted)]",children:d(t,e.value)})]})]},"".concat(e.anonymousId,"-").concat(e.rank))})}),(0,a.jsx)("article",{className:"overflow-hidden rounded-2xl border border-[color:var(--border)] bg-[color:var(--bg-secondary)]",children:(0,a.jsxs)("table",{className:"hidden w-full border-collapse text-sm md:table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-[color:var(--border)] text-left text-xs uppercase tracking-[0.16em] text-[color:var(--text-muted)]",children:[(0,a.jsx)("th",{className:"px-4 py-3",children:"Rank"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"User"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"Value"})]})}),(0,a.jsx)("tbody",{children:r.map(e=>{var r;return(0,a.jsxs)("tr",{className:"border-b border-[color:var(--border)] last:border-b-0",children:[(0,a.jsxs)("td",{className:"px-4 py-3 font-[family-name:var(--font-mono)]",children:["#",e.rank]}),(0,a.jsx)("td",{className:"px-4 py-3",children:e.claimed&&null!=(r=e.identity)?r:e.anonymousId}),(0,a.jsx)("td",{className:"px-4 py-3 font-[family-name:var(--font-mono)] text-[color:var(--text-muted)]",children:d(t,e.value)})]},"".concat(e.anonymousId,"-").concat(e.rank))})})]})})]})}let n=["tokens","cost","messages","sessions","streak"],i=["24h","7d","30d","all"];function m(){let[e,r]=(0,l.useState)("tokens"),[t,s]=(0,l.useState)("30d"),[d,m]=(0,l.useState)([]),[x,u]=(0,l.useState)(!0),[b,h]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async()=>{u(!0),h(null);try{let a=await fetch("/api/leaderboard?category=".concat(e,"&period=").concat(t),{cache:"no-store"});if(!a.ok){var r;let e=await a.json();throw Error(null!=(r=e.error)?r:"Unable to load leaderboard")}let s=await a.json();m(s.entries)}catch(e){h(e instanceof Error?e.message:"Unable to load leaderboard")}finally{u(!1)}})()},[e,t]),(0,a.jsxs)("main",{className:"mx-auto min-h-screen w-full max-w-6xl px-5 py-10 md:px-8 md:py-14",children:[(0,a.jsxs)("header",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.2em] text-[color:var(--text-muted)]",children:"Global Leaderboard"}),(0,a.jsx)("h1",{className:"mt-1 text-2xl font-semibold",children:"Community rankings"})]}),(0,a.jsx)(o(),{href:"/dashboard",className:"self-start rounded-xl border border-[color:var(--border)] px-3 py-2 text-sm text-[color:var(--text-muted)] transition hover:text-white focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-400 md:self-auto",children:"Back to Dashboard"})]}),(0,a.jsxs)("section",{className:"mt-6 grid gap-4 rounded-2xl border border-[color:var(--border)] bg-[color:var(--bg-secondary)] p-4 md:grid-cols-2 md:p-5",children:[(0,a.jsxs)("label",{className:"text-sm text-[color:var(--text-muted)]",children:["Category",(0,a.jsx)("select",{value:e,onChange:e=>r(e.target.value),className:"mt-2 block w-full rounded-lg border border-[color:var(--border)] bg-black/20 px-3 py-2 text-sm text-white outline-none transition focus:border-emerald-400 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-400",children:n.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("label",{className:"text-sm text-[color:var(--text-muted)]",children:["Period",(0,a.jsx)("select",{value:t,onChange:e=>s(e.target.value),className:"mt-2 block w-full rounded-lg border border-[color:var(--border)] bg-black/20 px-3 py-2 text-sm text-white outline-none transition focus:border-emerald-400 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-400",children:i.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]})]}),(0,a.jsx)("section",{className:"mt-6",children:x?(0,a.jsx)("div",{className:"rounded-2xl border border-[color:var(--border)] bg-[color:var(--bg-secondary)] p-8 text-sm text-[color:var(--text-muted)]",children:"Loading leaderboard..."}):b?(0,a.jsx)("div",{className:"rounded-lg bg-rose-900/35 px-3 py-2 text-sm text-rose-200",children:b}):(0,a.jsx)(c,{entries:d,category:e})})]})}},8830:(e,r,t)=>{Promise.resolve().then(t.bind(t,4140))}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=8830)),_N_E=e.O()}]);